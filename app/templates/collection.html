{% extends 'base.html' %}

{% block content %}
<main id="main" class="container">
    <div class="row">
        <div class="col-lg-8">
            <div>
                <div id="profile_header" class="row justify-content-md-left align-items-center">
                    <div class="col-auto">
                        <h3>{{ user.username }}'s Collection
                            <br>
                        </h3>
                    </div>
                </div>
                <p></p>
                <div class="row align-items-center justify-content-between">
                    <div class="col-auto">
                        {{ user.username}}'s total collection: {{ user_total }} bottles
                    </div>
                </div>
                <div>
                    {% if bottles %}
                    <table class="table table-striped table-hover">
                        {% for bottle in bottles %}
                        <tbody>
                            <tr valign="top">
                                <td class="top" align="center">
                                    {% if bottle.photo %}
                                    <img src="{{ url_for('static', filename='uploads/' + bottle.photo) }}">
                                    {% else %}
                                    <img src="{{ url_for('static', filename='images/placeholder.png') }}" alt="">
                                    {% endif %}
                                </td>
                                <td class="top">
                                    <h3>
                                        <a href="{{ url_for('main.single_bottle', id=bottle.id) }}">
                                        {{ bottle.label }}
                                        </a>
                                    </h3>
                                    Owner: <a href="{{ url_for('main.collection', name=bottle.owner) }}">
                                    {{ bottle.owner }}
                                </a>
                                    <br>
                                    {% if bottle.identifier %}
                                    Identifier: {{ bottle.identifier }}
                                    {% endif %}
                                    <br>
                                    Brewed by: {{ bottle.maker }}
                                    <br>
                                    Type: {{ bottle.category }}
                                    <br>
                                    Status: {{ bottle.status }}
                                    <br>
                                    Date added: {{ moment(bottle.posted).format('MMMM Do YYYY') }}
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    <div class="bottom-floating">
                        <a class="btn-danger btn-sm" href="{{ url_for('main.update_collection') }}"
                           title="Add a new bottle">
                            Add New Bottle
                        </a>
                    </div>
                    {% else %}
                    <div class="alert alert-danger">
                        <p>You haven't added any bottles to your collection!</p>
                        <a class="alert-link" href="{{ url_for('main.update_collection') }}">Add a bottle now</a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}